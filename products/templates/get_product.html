{% extends 'base.html' %}

{% block content %}

<section>
    <div class="container accountform">
        <div class="row buy-product-container">
            <h2 class="col-12 buy-product-header">{{ product.name }}</h2>
            <p class="col-12 buy-product-feature">{{ product.feature }}</p>
        </div>
        <div class="row product-details">
            <div class="col-4 col-md-4">
                <img class="img-fluid" src="{{ MEDIA_URL }}{{ product.image }}">
            </div>
            <div class="col-8 col-md-8 price">
                <p class="buy-product-price"><i class="fas fa-pound-sign"></i>{{ product.price }}<span>inc vat</span></p>
                
                {% if user.is_authenticated %}
                <form method="POST" action="{% url 'add_to_cart' product.id %}">
                    {% csrf_token %}
                  
                    <div class="input-group col-6">
                        <input id="quantity" name="quantity" type="hidden" value="1" class="form-control">
                        <button class="view-product" id="add" type="submit">Add to basket</button>
                    </div>
                </form>
                {% else %}
                
                <form method="POST" action="{% url 'login' %}">
                    {% csrf_token %}
                  
                    <div class="input-group col-6">
                        <button class="view-product" id="add" type="submit">Login to Buy</button>
                    </div>
                </form>
                {% endif %}
               {{ average_rating }}
            </div>
        </div>
        <div class="row">
            <h3 class="col-12 sub-header">{{ product.name }} overview</h3>
            <p class="col-12 description">{{ product.description }}</p>
        </div>
    </div>
    
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h3>Customer Reviews</h3>
            </div>
        </div>
        <div class="row reviews">
            
            {% for review in reviews %}
            
            
            <div class="review col-12 user-review">
                <div class="row">
                    <div class="col-12">
                        <p>{{ review.user }}</p>
                    </div>
                </div>
            <div class="row d-flex align-items-center">
                <div class="col-2">
                    
                    {% if review.rating == 1 %}
                        <i class="fas fa-star star" ></i>
                        <i class="far fa-star star" ></i>
                        <i class="far fa-star star" ></i>
                        <i class="far fa-star star" ></i>
                        <i class="far fa-star star" ></i>
                    {% elif review.rating == 2 %}
                        <i class="fas fa-star star" ></i>
                        <i class="fas fa-star star" ></i>
                        <i class="far fa-star star" ></i>
                        <i class="far fa-star star" ></i>
                        <i class="far fa-star star" ></i>
                    {% elif review.rating == 3 %}
                        <i class="fas fa-star star" ></i>
                        <i class="fas fa-star star" ></i>
                        <i class="fas fa-star star" ></i>
                        <i class="far fa-star star" ></i>
                        <i class="far fa-star star" ></i>
                    {% elif review.rating == 4 %}
                        <i class="fas fa-star star" ></i>
                        <i class="fas fa-star star" ></i>
                        <i class="fas fa-star star" ></i>
                        <i class="fas fa-star star" ></i>
                        <i class="far fa-star star" ></i>
                    {% elif review.rating == 5 %}
                        <i class="fas fa-star star" ></i>
                        <i class="fas fa-star star" ></i>
                        <i class="fas fa-star star" ></i>
                        <i class="fas fa-star star" ></i>
                        <i class="fas fa-star star" ></i>
                    {% endif %}
                    
                </div>
            <div class="col-10">
                <h5 class="review-title"> {{ review.title }}</h5>
            </div>
            </div>
                <div class="row">
                    <div class="col-12">
                        <p>{{ review.content }}</p>
                    </div>
                </div>
            </div>
            
            {% endfor %}
        </div>
    </div>
    
</section>
{% endblock %}

